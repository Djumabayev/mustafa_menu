(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5260,3666],{3198:function(t,e,r){"use strict";r.d(e,{Z:function(){return navigation_FloatingNavigation}});var n=r(7294),o=r(5198),i=r.n(o),c=r(4240),a=r(2586),s=r(453),u=r(5893),navigation_FloatingNavigation=function(t){var e=t.children,r=(0,c.wq)(),o=r.topOffset,l=r.setTopOffset,p=(0,n.useState)(o),d=p[0],f=p[1];return(0,n.useEffect)(function(){var handleScroll=function(){var t=window.pageYOffset;Math.abs(d-t)<a.hj||(0,s.jU)()&&window.document.body.classList.contains("modal-open")||(d>t?l(0):l(-a.hi),f(t))};return window.addEventListener("scroll",handleScroll),function(){window.removeEventListener("scroll",handleScroll)}}),(0,u.jsx)(i(),{stickyStyle:{zIndex:a.j0,top:"".concat(o,"px"),transition:"top 0.3s ease-out"},children:e})}},3666:function(t,e,r){"use strict";r.r(e),r.d(e,{default:function(){return M}});var n=r(29),o=r(2777),i=r(2262),c=r(748),a=r(1531),s=r(3553),u=r(7247),l=r(9499),p=r(7794),d=r.n(p),f=r(7294),h=r(9008),m=r.n(h),v=r(6005),y=r(7686),g=r(9631),b=r(2586),x=r(5893);function ImageSlider(t){var e=t.images;if(0===e.length||!e[0].url)return null;var r=(0,f.useState)(e[0]),n=r[0],o=r[1];return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{className:"mt-md-4 ratio ratio-1x1",children:(0,x.jsx)(g.ZP,{className:"rounded with-placeholder object-fit-cover",width:b.Tn,height:b.Tn,src:n.url,alt:n.alt,priority:!0})}),e.length>1&&(0,x.jsx)("div",{className:"overflow-auto text-nowrap",children:e.map(function(t){return(0,x.jsx)("div",{className:"m-2 ratio ratio-1x1",children:(0,x.jsx)(g.ZP,{onClick:function(){return o(t)},className:"m-2 rounded object-fit-cover",width:b.lw,height:b.lw,src:t.url,alt:t.alt})},t.id)})})]})}var w=r(6698),j=r(453),Z=r(1175);r(8291);var P=r(4002),_=r(236),O=r(9071),S=r(6769),k=r(4132),N=r(3198),E=r(3320);function ownKeys(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}var M=function(t){(0,a.Z)(ProductPage,t);var e,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,r=(0,u.Z)(ProductPage);if(e){var n=(0,u.Z)(this).constructor;t=Reflect.construct(r,arguments,n)}else t=r.apply(this,arguments);return(0,s.Z)(this,t)});function ProductPage(t){var e,i,a;return(0,o.Z)(this,ProductPage),e=r.call(this,t),(0,l.Z)((0,c.Z)(e),"changeDishModify",(i=(0,n.Z)(d().mark(function _callee(t,r){var n;return d().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:n=e.dishModificationElem.getTotalSum(),e.setState({sum:n,hasErrors:r,modification:t});case 2:case"end":return o.stop()}},_callee)})),function(t,e){return i.apply(this,arguments)})),(0,l.Z)((0,c.Z)(e),"addToCart",v.ZP.throttle((a=(0,n.Z)(d().mark(function _callee2(t){var r,n,o,i,c,a,s,u,p;return d().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(t.preventDefault(),t.stopPropagation(),n=(r=e.props).product,o=r.router,i=r.backUrl,a=(c=e.state).modification,!c.hasErrors){d.next=7;break}return e.setState({firstSubmit:!1},function(){var t=window.document.getElementsByClassName("dish-valid-error");t.length>0&&t[0].scrollIntoView({block:"center",behavior:"smooth"})}),d.abrupt("return");case 7:s={productId:n.product_id,modification:n.group_modifications?a:void 0,modificator_id:n.productModifications?a[0].m:void 0,count:n.isWeight?100:1},u=_.Z.get(O.O6),-1!==(p=P.Z.getProductIndex(function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(r),!0).forEach(function(e){(0,l.Z)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}({cart:u},s)))&&(s.count+=u.products[p].count),P.Z.changeProducts(s),o.push(i,void 0,{scroll:!1}),e.setState({firstSubmit:!1});case 14:case"end":return d.stop()}},_callee2)})),function(t){return a.apply(this,arguments)}),500)),(0,l.Z)((0,c.Z)(e),"getDish",function(){var t=e.props.product;return t.group_modifications?t:{price:0,group_modifications:[{dish_modification_group_id:1,name:"",num_min:1,num_max:1,type:1,modifications:t.productModifications.map(function(t){return{dish_modification_id:t.modificator_id,name:t.name,price:t.price,hidePlus:!0}})}]}}),(0,l.Z)((0,c.Z)(e),"getButtonText",function(){var t=e.state,r=t.sum,n=t.firstSubmit;return t.hasErrors&&!n?(0,Z.Z)("delivery.product.buttonSelectModification"):(0,Z.Z)("delivery.product.addToCartButton",{sum:(0,j.f$)(r)})}),e.state={sum:t.product.price,hasErrors:!1,firstSubmit:!0},e}return(0,i.Z)(ProductPage,[{key:"componentDidMount",value:function(){this.dishModificationElem&&this.setState({hasErrors:!this.dishModificationElem.isValid()})}},{key:"render",value:function(){var t=this,e=this.props,r=e.product,n=e.router,o=e.settings,i=this.state,c=i.firstSubmit,a=i.hasErrors,s=n.query,u=s.showModifications,l=s.modal,p=o.showCart&&(0,E.Si)();return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(m(),{children:[(0,x.jsx)("title",{children:r.seoTitle||r.name}),(0,x.jsx)("meta",{property:"og:type",content:"restaurant.menu_item"}),(0,x.jsx)("meta",{property:"og:title",content:r.seoTitle||r.name}),(0,x.jsx)("meta",{property:"og:url",content:"/product/".concat(r.pos_id)}),(0,x.jsx)("meta",{property:"og:image",content:r.photo}),(0,x.jsx)("meta",{property:"og:description",content:r.seoDescription}),(0,x.jsx)("meta",{name:"description",content:r.seoDescription}),(0,x.jsx)("meta",{property:"restaurant:section",content:""}),(0,x.jsx)("meta",{property:"restaurant:variation:price:amount",content:r.price})]}),!l&&(0,x.jsx)("div",{className:"mt-2 mb-4",children:(0,x.jsx)(N.Z,{children:(0,x.jsx)(S.Z,{backUrl:"/",backTitle:(0,Z.Z)("delivery.product.backToMenu")})})}),(0,x.jsx)("div",{className:"container px-5 px-md-7 pt-md-5 flex-grow-1 ".concat(!p&&"pb-4"," "),children:(0,x.jsxs)("div",{className:"row",children:[(0,x.jsx)("div",{className:"col-sm-12 col-md-5 ".concat(u&&"d-none d-md-block"),children:(0,x.jsx)(ImageSlider,{images:[{id:1,url:r.photo,alt:r.name}]})}),(0,x.jsxs)("div",{className:"col-sm-12 col-md-7",children:[(0,x.jsx)("h1",{"data-testid":"product_name_in_popup",className:"mt-5 mb-3",children:r.name}),(0,x.jsx)(k.Z,{product:r}),!!r.description&&!u&&(0,x.jsx)("div",{className:"text-muted text-break overflow-hidden my-2",dangerouslySetInnerHTML:{__html:r.description}}),!r.group_modifications&&!r.productModifications&&(0,x.jsxs)("div",{className:"text-muted p-0 mt-3 h4",children:[(0,j.f$)(r.price),!!r.isWeight&&"\xa0".concat((0,Z.Z)("delivery.index.for100g"))]}),!!(r.group_modifications||r.productModifications)&&(0,x.jsx)("div",{className:"mt-7",children:(0,x.jsx)(w.Z,{ref:function(e){return t.dishModificationElem=e},dish:this.getDish(),onChangeModification:this.changeDishModify,modification:[],firstSubmit:c,showCart:p})})]})]})}),p&&(0,x.jsx)("div",{className:"px-4 pb-4 pt-3 border-top sticky-bottom bg-body",children:(0,x.jsx)("div",{className:"container",children:(0,x.jsx)("div",{className:"row",children:(0,x.jsx)("div",{className:"col-sm-12 col-md-7 offset-md-5",children:(0,x.jsx)(y.Z,{text:this.getButtonText(),onClick:this.addToCart,isDisabled:!c&&a})})})})})]})}}]),ProductPage}(f.Component);(0,l.Z)(M,"defaultProps",{backUrl:"/"})},2586:function(t,e,r){"use strict";r.d(e,{$5:function(){return m},MB:function(){return l},Rf:function(){return i},Tn:function(){return v},WQ:function(){return p},ZS:function(){return b},eG:function(){return c},hi:function(){return a},hj:function(){return s},j0:function(){return d},lw:function(){return g},p4:function(){return h},tt:function(){return n},w0:function(){return f},y4:function(){return o},yM:function(){return u},zJ:function(){return y}});var n="d-md-none",o="d-none d-md-block",i=600,c=1500,a=68,s=60,u=52,l=44,p=108,d=1020,f="app-hub-header",h="app-hub-footer",m=68,v=500,y=300,g=120,b=44},3394:function(t,e,r){"use strict";r.r(e),r.d(e,{default:function(){return Z}});var n,o=r(6835),i=r(29),c=r(2777),a=r(2262),s=r(1531),u=r(3553),l=r(7247),p=r(9499),d=r(7794),f=r.n(d),h=r(7294),m=r(6005),v=r(3666),y=r(1728),g=r(7584),b=r(236),x=r(4002),w=r(9071);r(8291);var j=r(5893);function ownKeys(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}var Z=function(t){(0,s.Z)(ProductPageWrapper,t);var e,r,n=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,r=(0,l.Z)(ProductPageWrapper);if(e){var n=(0,l.Z)(this).constructor;t=Reflect.construct(r,arguments,n)}else t=r.apply(this,arguments);return(0,u.Z)(this,t)});function ProductPageWrapper(t){(0,c.Z)(this,ProductPageWrapper);var e,r=(e=n.call(this,t)).props,o=r.settings,i=r.product;return(0,g.jU)()&&(b.Z.set(w.zX,o),b.Z.set(w.YF,[i])),e}return(0,a.Z)(ProductPageWrapper,[{key:"componentDidMount",value:(r=(0,i.Z)(f().mark(function _callee(){var t,e,r,n,i,c,a;return f().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return t=new y.Z,s.next=3,Promise.all([t.getSiteInfo([w.kk,w._2]),t.getProducts()]);case 3:e=s.sent,i=(n=(r=(0,o.Z)(e,2))[0]).navbar,c=n.slider,a=r[1],b.Z.set(w.Xb,i),b.Z.set(w.ue,c),b.Z.set(w.YF,a),x.Z.actualizeProducts(a);case 13:case"end":return s.stop()}},_callee)})),function(){return r.apply(this,arguments)})},{key:"render",value:function(){return(0,j.jsx)(v.default,function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(r),!0).forEach(function(e){(0,p.Z)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}({},this.props))}}]),ProductPageWrapper}(h.Component);(0,p.Z)(Z,"getInitialProps",(n=(0,i.Z)(f().mark(function _callee2(t){var e,r,n,i,c,a,s,u,l,p;return f().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(e=t.req,r=t.query,!(0,g.jU)()||(n=b.Z.get(w.YF),i=b.Z.get(w.zX),!((c=m.ZP.findWhere(n,{pos_id:Number(r.pid)}))&&i))){d.next=7;break}return d.abrupt("return",{product:c,settings:i});case 7:return a=new y.Z({domain:e?e.headers.host:null}),d.next=10,Promise.all([a.getProduct(r.pid),a.getSiteInfo([w.j4])]);case 10:return s=d.sent,l=(u=(0,o.Z)(s,2))[0],p=u[1].settings,d.abrupt("return",{product:l,settings:p});case 15:case"end":return d.stop()}},_callee2)})),function(t){return n.apply(this,arguments)}))},829:function(t,e,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/product/[pid]",function(){return r(3394)}])},29:function(t,e,r){"use strict";function asyncGeneratorStep(t,e,r,n,o,i,c){try{var a=t[i](c),s=a.value}catch(t){r(t);return}a.done?e(s):Promise.resolve(s).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function _next(t){asyncGeneratorStep(i,n,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(i,n,o,_next,_throw,"throw",t)}_next(void 0)})}}r.d(e,{Z:function(){return _asyncToGenerator}})},6576:function(t,e,r){"use strict";r.d(e,{Z:function(){return _wrapNativeSuper}});var n=r(7247),o=r(9331);function _construct(t,e,r){return(_construct=!function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}()?function(t,e,r){var n=[null];n.push.apply(n,e);var i=new(Function.bind.apply(t,n));return r&&(0,o.Z)(i,r.prototype),i}:Reflect.construct).apply(null,arguments)}function _wrapNativeSuper(t){var e="function"==typeof Map?new Map:void 0;return(_wrapNativeSuper=function(t){if(null===t||-1===Function.toString.call(t).indexOf("[native code]"))return t;if("function"!=typeof t)throw TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,Wrapper)}function Wrapper(){return _construct(t,arguments,(0,n.Z)(this).constructor)}return Wrapper.prototype=Object.create(t.prototype,{constructor:{value:Wrapper,enumerable:!1,writable:!0,configurable:!0}}),(0,o.Z)(Wrapper,t)})(t)}}},function(t){t.O(0,[5198,1728,5797,429,8306,9774,2888,179],function(){return t(t.s=829)}),_N_E=t.O()}]);
//# sourceMappingURL=[pid]-6851976b323727bd.js.map